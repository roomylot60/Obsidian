# Nginx ì‚¬ìš©ë²• ì´ì •ë¦¬

## ğŸ“Œ 1. Nginxë€?

- **ê³ ì„±ëŠ¥ ì›¹ ì„œë²„**ì´ì **ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì„œë²„**
- HTTP, HTTPS, TCP/UDP ë“± ë‹¤ì–‘í•œ í”„ë¡œí† ì½œ ì§€ì›
- ì •ì  ì›¹ í˜¸ìŠ¤íŒ…, ë¡œë“œ ë°¸ëŸ°ì‹±, API Gateway, SSL ì¢…ë£Œ ë“± ë‹¤ì–‘í•œ ìš©ë„ë¡œ í™œìš©

---

## âš™ï¸ 2. ì„¤ì¹˜ ë°©ë²•

### Ubuntu
```bash
sudo apt update
sudo apt install nginx
```

### CentOS
```bash
sudo yum install nginx
```

### ì‹¤í–‰/ì¤‘ì§€
```bash
sudo systemctl start nginx
sudo systemctl stop nginx
sudo systemctl restart nginx
sudo systemctl status nginx
```

---

## ğŸ“ 3. ì£¼ìš” ì„¤ì •íŒŒì¼ êµ¬ì¡°

| ê²½ë¡œ | ì„¤ëª… |
|------|------|
| `/etc/nginx/nginx.conf` | ë©”ì¸ ì„¤ì • íŒŒì¼ |
| `/etc/nginx/conf.d/*.conf` | ì„œë¸Œ ì„¤ì • íŒŒì¼ |
| `/etc/nginx/sites-available/` | ì‚¬ì´íŠ¸ë³„ ì„¤ì • íŒŒì¼ (Ubuntu ê³„ì—´) |
| `/etc/nginx/sites-enabled/` | ì‹¤ì œ í™œì„±í™”ëœ ì„¤ì • (symlink) |

---

## ğŸ” 4. ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ê¸°ë³¸ ì„¤ì • ì˜ˆì‹œ

```nginx
server {
    listen 80;
    server_name example.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## ğŸ”’ 5. SSL(HTTPS) ì ìš© ì˜ˆì‹œ (Let's Encrypt ì¸ì¦ì„œ ê¸°ë°˜)

```nginx
server {
    listen 443 ssl;
    server_name yourdomain.com;

    ssl_certificate     /etc/letsencrypt/live/yourdomain.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;

    location / {
        proxy_pass http://localhost:3000;
    }
}
```

---

## ğŸ³ 6. Dockerì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

### ë””ë ‰í† ë¦¬ êµ¬ì¡° ì˜ˆì‹œ
```
project/
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ docker/
    â””â”€â”€ nginx/
        â”œâ”€â”€ nginx.conf
        â””â”€â”€ conf.d/
            â””â”€â”€ default.conf
```

### docker-compose.yml ì˜ˆì‹œ
```yaml
services:
  nginx:
    image: nginx:latest
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./docker/nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./docker/nginx/conf.d:/etc/nginx/conf.d:ro
```

---

## ğŸ” 7. ì„¤ì • í…ŒìŠ¤íŠ¸ & ë””ë²„ê¹…

### ì„¤ì • ë¬¸ë²• ì²´í¬
```bash
sudo nginx -t
```

### ë¡œê·¸ í™•ì¸
```bash
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### í¬íŠ¸ ì ìœ  í™•ì¸
```bash
sudo ss -tuln | grep :80
```

---

## ğŸ§± 8. ë³´ì•ˆ ë° ìµœì í™” íŒ

- ë¶ˆí•„ìš”í•œ HTTP ë©”ì„œë“œ ì œí•œ (`limit_except`)
- ì •ì  íŒŒì¼ì— `cache-control` í—¤ë” ì¶”ê°€
- gzip ì••ì¶• ì„¤ì •
- connection timeout ì œí•œ
- SSL cipher suite ì¡°ì •

---

## ğŸš¦ 9. ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

| ì¦ìƒ | ì›ì¸ | í•´ê²° |
|------|------|------|
| 502 Bad Gateway | ë°±ì—”ë“œê°€ ë‹¤ìš´ | FastAPI/Node ì„œë²„ ìƒíƒœ í™•ì¸ |
| í¬íŠ¸ ì¶©ëŒ | ë‹¤ë¥¸ ì„œë¹„ìŠ¤ê°€ 80/443 ì‚¬ìš© | nginx í¬íŠ¸ ë³€ê²½ ë˜ëŠ” ì¶©ëŒ ì„œë¹„ìŠ¤ ì¢…ë£Œ |
| nginx.conf ì˜¤ë¥˜ | ë¬¸ë²• ì˜¤ë¥˜ | `nginx -t`ë¡œ ë””ë²„ê¹… |

---

## ğŸ“š 10. ì°¸ê³  ë§í¬

- [Nginx ê³µì‹ ë¬¸ì„œ](https://nginx.org/en/docs/)
- [DigitalOcean Nginx Config Generator](https://www.digitalocean.com/community/tools/nginx)
- [Let's Encrypt Certbot](https://certbot.eff.org/)
